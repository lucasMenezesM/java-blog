<head th:replace="fragments/shared/header :: header"></head>

<navbar th:replace="fragments/shared/navbar :: navbar"></navbar>

<div class="container mx-auto px-4 py-8">
  <article class="max-w-4xl mx-auto bg-white shadow-md rounded-lg p-6">
    <header class="mb-6">
      <h1 class="text-3xl font-bold text-gray-800 mb-2" th:text="${post.title}">Post Title</h1>
      <p class="text-sm text-gray-500" th:text="${#temporals.format(post.createdAt, 'dd/MM/yyyy')}">Published Date</p>
    </header>
    <div class="prose max-w-none mb-5 text-gray-700" th:utext="${post.body}">
      Post content goes here.
    </div>

    <a th:href="@{/posts/delete/{id}(id=${post.id})}"
      onclick="return confirm('Are you sure you want to delete this post?');" class="text-red-500 hover:underline">
      Delete
    </a>
    <a th:href="@{/posts/edit/{id}(id=${post.id})}" class="text-green-500 hover:underline ml-3">
      Edit
    </a>
  </article>

  <section class="max-w-4xl mx-auto mt-8 bg-white shadow-md rounded-lg p-6">
    <h2 class="text-2xl font-bold text-gray-800 mb-4">Leave a Comment</h2>
    <form th:action="@{/comments/post/{id}(id=${post.id})}" method="POST" class="space-y-4">
      <div>
        <label for="content" class="block text-sm font-medium text-gray-700">Comment</label>
        <textarea id="content" name="content" rows="4" required
          class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"></textarea>
      </div>
      <div class="flex justify-end">
        <button type="submit"
          class="bg-blue-500 text-white px-4 py-2 rounded-md shadow hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">
          Submit Comment
        </button>
      </div>
      <h2 class="text-2xl font-bold text-gray-800 mb-4">Comments</h2>
      <div th:if="${comments.size() == 0}">
        <p class="text-gray-500">No comments yet. Be the first to comment!</p>
      </div>
      <div th:each="comment : ${comments}" class="border-t border-gray-200 pt-4">
        <p class="text-md text-gray-800" th:text="${comment.user.getFirstName()}">Comment
        <p class="text-sm mb-3 text-gray-500" th:text="${#temporals.format(comment.createdAt, 'dd/MM/yyyy')}"></p>
        <p class="text-gray-700" th:text="${comment.content}">Comment content goes here.</p>
        <a th:href="@{/comments/delete/{id}(id=${comment.id})}"
          onclick="return confirm('Are you sure you want to delete this comment?');"
          class="text-red-500 hover:underline">
          Delete
        </a>
      </div>
  </section>
</div>

<footer th:replace="fragments/shared/footer :: footer"></footer>